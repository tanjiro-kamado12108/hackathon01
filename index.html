<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Classroom & Timetable Scheduler</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }

    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 20px 40px rgba(59, 130, 246, 0.1); }

    .input-focus { transition: all 0.2s ease; }
    .input-focus:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }

    .btn-primary {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        transition: all 0.3s ease;
    }
    .btn-primary:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
    }

    .floating-shapes { position: absolute; width: 100%; height: 100%; overflow: hidden; z-index: 0; }
    .shape { position: absolute; opacity: 0.1; animation: float 6s ease-in-out infinite; }
    .shape:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
    .shape:nth-child(2) { top: 60%; right: 10%; animation-delay: 2s; }
    .shape:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 4s; }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
    }

    .schedule-slot { transition: all 0.2s ease; }
    .schedule-slot:hover { background-color: #f8fafc; border-color: #3b82f6; }

    .occupied { background-color: #dbeafe; border-color: #3b82f6; }
    .available { background-color: #dcfce7; border-color: #22c55e; }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">

  <!-- Flash Messages / Notifications -->
  {% if notifications %}
  <div class="max-w-2xl mx-auto mt-6">
    {% for notif in notifications %}
      <div class="bg-yellow-400 text-white px-6 py-4 rounded-lg shadow mb-4 flex items-center">
        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01"/>
        </svg>
        <span class="font-semibold">{{ notif.message }}</span>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="max-w-2xl mx-auto mt-6">
        {% for message in messages %}
          <div class="bg-green-500 text-white px-6 py-4 rounded-lg shadow mb-4 flex items-center">
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span class="font-semibold">{{ message }}</span>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Header -->
  <header class="gradient-bg text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-6">
        <div class="flex items-center space-x-3">
          <div class="bg-white bg-opacity-20 p-2 rounded-lg">
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-bold">Smart Classroom</h1>
            <p class="text-blue-100">Timetable & Resource Manager</p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <a href="{{ url_for('signup') }}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2">
            <span>üë§</span> <span>Sign Up</span>
          </a>
          <a href="{{ url_for('login') }}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2">
            <span>üîë</span> <span>Sign In</span>
          </a>
          <button id="settingsBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg">‚öôÔ∏è Settings</button>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Dashboard Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600">Total Classrooms</p>
            <p class="text-2xl font-bold text-gray-900">24</p>
          </div>
          <div class="bg-blue-100 p-3 rounded-lg">üè´</div>
        </div>
      </div>
      <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600">Available Now</p>
            <p class="text-2xl font-bold text-green-600">8</p>
          </div>
          <div class="bg-green-100 p-3 rounded-lg">‚úÖ</div>
        </div>
      </div>
      <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600">In Use</p>
            <p class="text-2xl font-bold text-orange-600">12</p>
          </div>
          <div class="bg-orange-100 p-3 rounded-lg">üìö</div>
        </div>
      </div>
      <div class="bg-white rounded-xl shadow-sm p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600">Maintenance</p>
            <p class="text-2xl font-bold text-red-600">4</p>
          </div>
          <div class="bg-red-100 p-3 rounded-lg">üîß</div>
        </div>
      </div>
    </div>

    <!-- Timetable Section -->
    {% set times = ['08:00', '10:00', '12:00', '14:00', '16:00'] %}
    {% set days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}
    <div class="overflow-x-auto mb-8">
      <table id="timetable" class="min-w-full border border-gray-200 rounded-lg">
        <thead>
          <tr class="bg-gray-100">
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500">Time</th>
            {% for day in days %}
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500">{{ day }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for time in times %}
            <tr>
              <td class="px-4 py-2 text-sm font-medium text-gray-700">{{ time }}</td>
              {% for day in days %}
                {% set entry = timetable | selectattr('day', 'equalto', day) | selectattr('period', 'equalto', time) | list | first %}
                <td class="px-4 py-2 border schedule-slot {% if entry %}occupied{% else %}available{% endif %}">
                  {% if entry %}
                    {{ entry.subject }}<br><span class="text-xs text-gray-500">{{ entry.room }}</span>
                  {% else %}
                    Free
                  {% endif %}
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-96">
      <h2 class="text-xl font-semibold mb-4">Settings</h2>
      <button id="closeSettings" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800">‚úñÔ∏è</button>
      <p class="text-gray-700">User settings and preferences can be configured here.</p>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    function updateNotificationCount() {
        const notificationList = document.getElementById('notificationList');
        const countBadge = document.querySelector('.bg-blue-100');
        if (notificationList && countBadge) {
            const remainingNotifications = notificationList.children.length;
            if (remainingNotifications === 0) {
                countBadge.textContent = 'No New';
                countBadge.className = 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs font-medium px-2 py-1 rounded-full';
            } else {
                countBadge.textContent = `${remainingNotifications} New`;
                countBadge.className = 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs font-medium px-2 py-1 rounded-full';
            }
        }
    }

    document.getElementById('settingsBtn').addEventListener('click', () => {
      document.getElementById('settingsModal').classList.remove('hidden');
    });

    document.getElementById('closeSettings').addEventListener('click', () => {
      document.getElementById('settingsModal').classList.add('hidden');
    });
  </script>
</body>
</html>
